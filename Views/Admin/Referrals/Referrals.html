{{Model Lawspot.Views.Admin.ReferralsViewModel}}

<h1>Referrals</h1>

<form method="get" class="filter-form">
    <div class="sort">
        Sort By
        <select id="sort-drop-down" name="sort" onchange="this.form.submit()">
            {{#SortOptions}}
                <option value="{{Value}}" {{#Selected}}selected{{/Selected}}>{{Text}}</option>
            {{/SortOptions}}
        </select>
    </div>
    <div class="filter">
        Show
        <select id="filter-drop-down" name="filter" onchange="this.form.submit()">
            {{#FilterOptions}}
                <option value="{{Value}}" {{#Selected}}selected{{/Selected}}>{{Text}}</option>
            {{/FilterOptions}}
        </select>
    </div>
    <div class="search">
        <input id="search-textbox" type="text" name="search" placeholder="Search questions" value="{{Search}}" />
        <button><img src="/views/admin/search.png" alt="search" /></button>
    </div>
    <div class="category">
        View questions asked in
        <select id="category-drop-down" name="category" onchange="this.form.submit()">
            {{#CategoryOptions}}
                <option value="{{Value}}" {{#Selected}}selected{{/Selected}}>{{Text}}</option>
            {{/CategoryOptions}}
        </select>
    </div>
</form>

{{! Page numbers }}
{{#Questions}}
    {{#ShowPageLabels}}
        <div class="page-numbers">
            {{#HasPrevious}}
                <a class="button" href="{{PreviousUri}}">Previous</a>
            {{/HasPrevious}}
            {{^HasPrevious}}
                <span class="button disabled">Previous</span>
            {{/HasPrevious}}
            {{#PageLabels}}
                {{#IsClickable}}
                    <a class="button" href="{{NavigateUri}}">{{Text}}</a>
                {{/IsClickable}}
                {{#IsCurrentPage}}
                    <span class="button current-page">{{Text}}</span>
                {{/IsCurrentPage}}
                {{#IsEllipsis}}
                    <span class="ellipsis">{{Text}}</span>
                {{/IsEllipsis}}
            {{/PageLabels}}
            {{#HasNext}}
                <a class="button" href="{{NextUri}}">Next</a>
            {{/HasNext}}
            {{^HasNext}}
                <span class="button disabled">Next</span>
            {{/HasNext}}
        </div>
    {{/ShowPageLabels}}
{{/Questions}}

<div style="clear: right">
    {{#Questions.Items}}
	    <div class="question-container">
	        <img class="left" src="/views/admin/referrals/question-icon.png" width="27" height="19" alt="" />
	        <div class="question-header">
	            <a href="#">{{Title}}</a><br />
                <span class="question-time">{{DateAndTime}}</span>
                <span class="question-category">{{CategoryName}}</span>
	        </div>
            <div class="inner-content"></div>
	    </div>
    {{/Questions.Items}}
</div>

{{^Questions.Items}}
    <p>There are no questions that meet your criteria.</p>
{{/Questions.Items}}

{{! Change the mustache set delimiter so that tags within the templates are not replaced }}
{{=** **=}}

<script id="answer-template" type="text/template">
    <form class="initial-form">

        <div id="conflicted-container">
            Please confirm that you are not conflicted. <br />
            <br />
            <strong>Client's name:</strong> {{ClientName}} <br />
            <strong>Other party's name:</strong> {{OtherPartyName}} <br />
            <br />
            <button data-action="not-conflicted" type="submit">I am not conflicted</button>
        </div>

        <div id="not-conflicted-container" style="display: none">
            <div><strong>Client's name:</strong> {{ClientName}}</div>
            <div><strong>Client's email address:</strong> {{ClientEmail}}</div>
            <div><strong>Client's phone number:</strong> {{ClientPhone}}</div>
            <div><strong>Other party's name:</strong> {{OtherPartyName}}</div>
            <br />

            <label><strong>Question</strong></label><br />
            <div>{{Title}}</div>

            <br />
            <label><strong>Description</strong></label><br />
            <div>{{Details}}</div>

            {{^Accepted}}
                <br />
                <div class="centre">
                    <button data-action="accept" type="submit">ACCEPT</button>
                    <img class="progress-indicator" src="/shared/images/progress-indicator.gif" />
                </div>
            {{/Accepted}}
        </div>
    </form>
</script>

<script id="accept-template" type="text/template">
    <div class="action-complete approved">
        <img class="left" src="/views/admin/approved.png" width="26" height="26" alt="" />
        <h3>Thanks! You've just accepted a referral.</h3>
        <p>
            <strong>Question:</strong><br />
            {{Title}}
        </p>
        <p>
            <strong>Details:</strong><br />
            {{{ResponseHtml}}}
        </p>
        <div class="centre">
            <button type="submit">NEXT QUESTION</button>
        </div>
    </div>
</script>

**! Change the mustache set delimiter back to normal **
**={{ }}=**